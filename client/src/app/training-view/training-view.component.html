@if (isLoading) {
<app-spinner></app-spinner>
} @else {
<div class="container my-4">
  <div class="row align-items-center">
    <div class="col text-left">
      <h3 class="display-4 title">{{ title }}</h3>
      <p class="lead week-day-info">
        Week {{ trainingWeekIndex + 1 }} - Day {{ trainingDayIndex + 1 }}
      </p>
    </div>
  </div>
</div>

<form (submit)="onSubmit($event)">
  <table
    class="table table-hover training-table responsive-table caption-top mb-4"
  >
    <thead>
      <tr>
        <th scope="col">Category</th>
        <th scope="col">Exercise</th>
        <th scope="col" class="text-center">Sets</th>
        <th scope="col" class="text-center">Reps</th>
        <th scope="col" class="text-center">Weight</th>
        <th scope="col" class="text-center">RPE</th>
        <th scope="col" class="text-center">&#64;RPE</th>
        <th scope="col" class="text-center">Max</th>
      </tr>
    </thead>
    <tbody>
      @for (k of [1, 2, 3, 4, 5, 6, 7, 8]; track k) {
      <tr>
        <td data-cell="Category">
          <select
            name="day1_exercise{{ k }}_category"
            class="exercise-category-selector transparent-input w-100"
            (change)="onCategoryChange($event)"
            [ngStyle]="{
              opacity:
                trainingDay.exercises[k - 1]?.category === '- Bitte AuswÃ¤hlen -'
                  ? 0
                  : 1
            }"
          >
            @for (category of exerciseCategories; track category) {
            <option
              [value]="category"
              [selected]="trainingDay.exercises[k - 1]?.category === category"
            >
              {{ category }}
            </option>
            }
          </select>
        </td>
        <td data-cell="Exercise">
          @for (category of exerciseCategories; track category) {
          <select
            name="day1_exercise{{ k }}_exercise_name"
            class="exercise-name-selector transparent-input"
            [disabled]="trainingDay.exercises[k - 1]?.category !== category"
            [style.display]="
              trainingDay.exercises[k - 1]?.category === category
                ? 'block'
                : 'none'
            "
            (change)="onInputChange($event)"
          >
            @for (exerciseName of categorizedExercises[category]; track
            exerciseName) {
            <option
              [value]="exerciseName"
              [selected]="
                trainingDay.exercises[k - 1]?.exercise === exerciseName
              "
            >
              {{ exerciseName }}
            </option>
            }
          </select>
          }
        </td>
        <td data-cell="Sets">
          <input
            type="number"
            class="transparent-input sets"
            name="day1_exercise{{ k }}_sets"
            [value]="trainingDay.exercises[k - 1]?.sets || ''"
            (input)="onInputChange($event)"
          />
        </td>
        <td data-cell="Reps">
          <input
            type="number"
            class="transparent-input reps"
            name="day1_exercise{{ k }}_reps"
            [value]="trainingDay.exercises[k - 1]?.reps || ''"
            (input)="onInputChange($event)"
          />
        </td>
        <td data-cell="Weight">
          <input
            type="number"
            class="transparent-input weight"
            name="day1_exercise{{ k }}_weight"
            [value]="trainingDay.exercises[k - 1]?.weight || ''"
            (input)="onInputChange($event)"
          />
        </td>
        <td data-cell="RPE">
          <input
            type="number"
            class="transparent-input targetRPE"
            name="day1_exercise{{ k }}_targetRPE"
            [value]="trainingDay.exercises[k - 1]?.targetRPE || ''"
            (input)="onInputChange($event)"
          />
        </td>
        <td data-cell="@RPE">
          <input
            type="string"
            class="transparent-input actualRPE"
            name="day1_exercise{{ k }}_actualRPE"
            [value]="trainingDay.exercises[k - 1]?.actualRPE || ''"
            (input)="onInputChange($event)"
          />
        </td>
        <td data-cell="Est. Max">
          <input
            type="number"
            class="transparent-input estMax"
            readonly
            name="day1_exercise{{ k }}_estMax"
            [value]="trainingDay.exercises[k - 1]?.estMax || ''"
            (input)="onInputChange($event)"
          />
        </td>
      </tr>
      }
    </tbody>
  </table>

  <input type="submit" class="btn btn-dark" />
</form>
}
